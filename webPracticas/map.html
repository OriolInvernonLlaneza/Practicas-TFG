<!DOCTYPE html>
<meta charset="utf-8">
<style>
    #toggle {
        position: absolute;
        right: 15px;
        top: 15px;
        z-index: 100;
    }

    .map path {
        fill: #eee;
        stroke: #fff;
        stroke-width: 2;
    }

    .links line {
        stroke: #679;
        stroke-opacity: 0.25;
    }

    .nodes circle {
        fill: #679;
        stroke: #235;
        stroke-width: 2;
    }
</style>

<body>
    <script src="//d3js.org/d3.v4.min.js"></script>
    <script src="http://d3js.org/topojson.v0.min.js"></script>
    <script>
        var width = 960,
            height = 480;

        var svg = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height);

        // remove any previous graphs
        svg.selectAll(".g-main").remove();

        // create main frame
        var gMain = svg.append("g")
            .classed("g-main", true);

        // append white rect to frame
        var rect = gMain.append("rect")
            .attr("width", width)
            .attr("height", height)
            .style("fill", "white");

        // append draw    
        var gDraw = gMain.append("g");

        var projection = d3.geoEquirectangular()
            .scale(153)
            .translate([width / 2, height / 2]);

        var path = d3.geoPath()
            .projection(projection);

        var graticule = d3.geoGraticule();

        d3.json("resources/world-50m.json", function (error, world) {
            // zoom list
            function zoomed() {
                gMain.attr("transform", d3.event.transform); // transforms drawing with zoom event
            }

            var zoom = d3.zoom() // Creates new zoom behavior (obj and func) https://github.com/_d3/_d3-zoom
                .on("zoom", zoomed); // add listener

            gMain.call(zoom);

            gDraw.append("g")
                .attr("class", "land")
                .selectAll("path")
                .data([topojson.object(world, world.objects.land)])
                .enter().append("path")
                .attr("d", path);

            gDraw.append("g")
                .attr("class", "boundary")
                .selectAll("boundary")
                .data([topojson.object(world, world.objects.countries)])
                .enter().append("path")
                .attr("d", path);

            gDraw.append("g")
                .attr("class", "graticule")
                .selectAll("path")
                .data(graticule.lines)
                .enter().append("path")
                .attr("d", path);
        });
    </script>
</body>

</html>